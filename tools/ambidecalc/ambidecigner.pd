#N canvas 21 28 1249 806 10;
#N canvas 0 22 502 352 dec 0;
#X obj 50 50 r dec_in;
#X obj 50 100 ambi2_decode_hemi 4 24 0;
#X obj 50 150 s dec_out;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X restore 70 435 pd dec;
#X obj 70 416 s dec_in;
#X obj 70 455 r dec_out;
#N canvas 39 22 1249 819 (subpatch) 0;
#X obj 48 43 inlet;
#X text 209 33 list \; 1.arg: <symbol> kind of loudspeaker arrangement
\; [circle \, hemisphere \, sphere] \; 2.arg: <float> ambisonic order
\; 3.arg: <float> number of loudspeakers \;;
#X obj 48 122 route list;
#X obj 49 186 route circle Circle CIRCLE circ Circ CIRC c C;
#X obj 359 207 route hemisphere Hemisphere HEMISPHERE hemi Hemi HEMI
h H;
#X obj 752 229 route sphere Sphere SPHERE s S;
#X obj 957 276 print UNI_DECODE_error;
#X obj 957 252 pp couldn't parse:;
#X obj 194 243 ambi2_decode 3 2 7 0;
#X obj 49 286 pack f f;
#X obj 40 736 outlet;
#X obj 359 293 pack f f;
#X obj 754 321 pack f f;
#X obj 194 266 ambi2_decode 4 2 9 0;
#X obj 541 278 ambi2_decode_hemi 4 15 0;
#X obj 931 306 ambi2_decode 4 3 25 0;
#X msg 358 345 \; pd-dec clear \; pd-dec obj 50 50 r dec_in \; pd-dec
obj 50 100 ambi2_decode_hemi \$1 \$2 0 \; pd-dec obj 50 150 s dec_out
\; pd-dec connect 0 0 1 0 \; pd-dec connect 1 0 2 0 \; to_nbxm dim
\$2 2 \; to_index dim \$2 1;
#X msg 753 375 \; pd-dec clear \; pd-dec obj 50 50 r dec_in \; pd-dec
obj 50 100 ambi2_decode \$1 3 \$2 0 \; pd-dec obj 50 150 s dec_out
\; pd-dec connect 0 0 1 0 \; pd-dec connect 1 0 2 0 \; to_nbxm dim
\$2 2 \; to_index dim \$2 1;
#X msg 47 342 \; pd-dec clear \; pd-dec obj 50 50 r dec_in \; pd-dec
obj 50 100 ambi2_decode \$1 2 \$2 0 \; pd-dec obj 50 150 s dec_out
\; pd-dec connect 0 0 1 0 \; pd-dec connect 1 0 2 0 \; to_nbxm dim
\$2 1 \; to_index dim \$2 1;
#N canvas 0 22 415 463 (subpatch) 0;
#X obj 40 99 unpack f f;
#X msg 151 99 set;
#X obj 105 121 t f f;
#X msg 135 144 set matrix \$1 1;
#X obj 104 172 until;
#X obj 200 259 f;
#X obj 228 259 + 1;
#X msg 189 99 0;
#X msg 229 281 add2 \$1;
#X obj 40 17 inlet;
#X obj 133 347 outlet;
#X obj 39 42 t b l b;
#X msg 133 324 matrix 24 1 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17
18 19 20 21 22 23 24;
#X connect 0 1 2 0;
#X connect 1 0 12 0;
#X connect 2 0 4 0;
#X connect 2 1 3 0;
#X connect 3 0 12 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 5 1;
#X connect 6 0 8 0;
#X connect 7 0 5 1;
#X connect 8 0 12 0;
#X connect 9 0 11 0;
#X connect 11 0 12 0;
#X connect 11 1 0 0;
#X connect 11 2 1 0;
#X connect 11 2 7 0;
#X connect 12 0 10 0;
#X restore 318 520 pd;
#X obj 318 541 s to_index;
#N canvas 0 22 583 365 (subpatch) 0;
#X obj 40 17 inlet;
#X obj 335 20 inlet;
#X text 87 16 1 col;
#X text 277 21 2 col;
#X obj 275 234 s label_azm1;
#X obj 282 257 s label_azm2;
#X obj 81 236 s label_elv1;
#X obj 93 255 s label_elv2;
#X msg 288 187 label azimuth;
#X msg 287 211 label degree;
#X msg 275 166 label empty;
#X msg 98 171 label elevation;
#X msg 109 192 label azimuth;
#X msg 106 275 label degree;
#X connect 0 0 12 0;
#X connect 0 0 10 0;
#X connect 1 0 11 0;
#X connect 1 0 8 0;
#X connect 1 0 9 0;
#X connect 8 0 4 0;
#X connect 9 0 5 0;
#X connect 10 0 4 0;
#X connect 10 0 5 0;
#X connect 11 0 6 0;
#X connect 12 0 6 0;
#X connect 13 0 7 0;
#X restore 405 519 pd;
#X obj 48 309 t b l l b;
#X obj 360 318 t b l l b;
#X obj 754 347 t b l l b;
#X obj 124 546 symbol;
#X msg 269 711 bang;
#X msg 309 710 read \$1;
#X obj 269 735 mtx;
#X obj 270 680 t b s;
#X obj 124 777 s to_nbxm;
#X msg 394 717 write test.mtx;
#X obj 50 241 unpack f f s;
#X obj 360 264 unpack f f s;
#X obj 753 287 unpack f f s;
#X obj 50 215 t l b;
#X obj 359 241 t l b;
#X obj 752 259 t l b;
#X obj 148 491 makefilename empty_%c;
#X msg 147 470 2;
#X obj 123 589 sel default;
#X obj 206 581 makefilename empty_%c;
#X msg 205 560 2;
#X obj 206 538 loadbang;
#X obj 84 700 mtx 1 1;
#X msg 84 674 zeros \$1 \$2;
#X obj 46 570 r to_nbxm;
#X obj 46 591 route dim;
#X obj 83 651 any;
#X obj 199 656 sel default;
#X obj 277 609 loadbang;
#X msg 277 631 symbol;
#X obj 356 621 r to_nbxm;
#X obj 356 642 route dim;
#X obj 269 759 mtx_resize;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 3 0;
#X connect 3 0 35 0;
#X connect 3 1 35 0;
#X connect 3 2 35 0;
#X connect 3 3 35 0;
#X connect 3 4 35 0;
#X connect 3 5 35 0;
#X connect 3 6 35 0;
#X connect 3 7 35 0;
#X connect 3 8 4 0;
#X connect 4 0 36 0;
#X connect 4 1 36 0;
#X connect 4 2 36 0;
#X connect 4 3 36 0;
#X connect 4 4 36 0;
#X connect 4 5 36 0;
#X connect 4 6 36 0;
#X connect 4 7 36 0;
#X connect 4 8 5 0;
#X connect 5 0 37 0;
#X connect 5 1 37 0;
#X connect 5 2 37 0;
#X connect 5 3 37 0;
#X connect 5 4 37 0;
#X connect 5 5 7 0;
#X connect 7 0 6 0;
#X connect 9 0 22 0;
#X connect 11 0 23 0;
#X connect 12 0 24 0;
#X connect 19 0 20 0;
#X connect 22 0 25 0;
#X connect 22 1 19 0;
#X connect 22 2 18 0;
#X connect 22 3 21 0;
#X connect 23 0 25 0;
#X connect 23 1 19 0;
#X connect 23 2 16 0;
#X connect 23 3 21 1;
#X connect 24 0 25 0;
#X connect 24 1 19 0;
#X connect 24 2 17 0;
#X connect 24 3 21 1;
#X connect 25 0 40 0;
#X connect 26 0 28 0;
#X connect 27 0 28 0;
#X connect 28 0 54 0;
#X connect 29 0 26 0;
#X connect 29 1 27 0;
#X connect 31 0 28 0;
#X connect 32 0 9 0;
#X connect 32 1 9 1;
#X connect 32 2 25 1;
#X connect 33 0 11 0;
#X connect 33 1 11 1;
#X connect 33 2 25 1;
#X connect 34 0 12 0;
#X connect 34 1 12 1;
#X connect 34 2 25 1;
#X connect 35 0 32 0;
#X connect 35 1 39 0;
#X connect 36 0 33 0;
#X connect 36 1 39 0;
#X connect 37 0 34 0;
#X connect 37 1 39 0;
#X connect 38 0 25 1;
#X connect 39 0 38 0;
#X connect 40 0 48 0;
#X connect 40 1 49 0;
#X connect 41 0 40 1;
#X connect 42 0 41 0;
#X connect 43 0 42 0;
#X connect 44 0 30 0;
#X connect 45 0 44 0;
#X connect 46 0 47 0;
#X connect 47 0 48 1;
#X connect 48 0 45 0;
#X connect 49 0 48 0;
#X connect 49 1 29 0;
#X connect 50 0 51 0;
#X connect 51 0 49 1;
#X connect 52 0 53 0;
#X connect 53 0 54 1;
#X connect 54 0 30 0;
#X restore 54 300 pd;
#N canvas 0 22 1235 630 helps 0;
#X text 548 417 1.arg: <float> ambisonic order;
#X obj 621 354 round_zero 1e-06;
#X obj 551 14 bng 35 250 50 0 empty empty empty 0 -6 0 8 -24198 -42246
-1;
#X msg 609 135 ambi_weight 1 1 1 1;
#X msg 589 164 1 90 0 \, 2 45 45 \, 3 45 135 \, 4 45 225 \, 5 45 315
\, 6 0 0 \, 7 0 45 \, 8 0 90 \, 9 0 135 \, 10 0 180 \, 11 0 225 \,
12 0 270 \, 13 0 315;
#X obj 589 198 pp real_ls;
#X msg 571 227 begin_pseudo_inverse;
#X msg 551 299 end_pseudo_inverse;
#X msg 755 276 sing_range 1e-10;
#X obj 621 377 mtx_print;
#X text 580 404 initial arguments:;
#X text 548 430 2.arg: <float> number of real existing loudspeakers
;
#X text 548 442 3.arg: <float> number of virtual phantom_loudspeakers
;
#X obj 621 333 ambi2_decode_hemi 3 13 0;
#X obj 551 58 t b b b b;
#X msg 566 264 ipht_ireal_muladd \$1 \$2 \$3;
#X obj 130 386 round_zero 1e-06;
#X obj 60 51 bng 35 250 50 0 empty empty empty 0 -6 0 8 -24198 -42246
-1;
#X msg 143 139 ambi_weight 1 1 1 1;
#X msg 160 117 mirror_weight 0.7;
#X obj 110 238 pp pht_ls;
#X obj 60 95 t b b b b b b b;
#X msg 126 161 1 90 0 \, 2 45 45 \, 3 45 135 \, 4 45 225 \, 5 45 315
\, 6 0 0 \, 7 0 45 \, 8 0 90 \, 9 0 135 \, 10 0 180 \, 11 0 225 \,
12 0 270 \, 13 0 315;
#X obj 126 195 pp real_ls;
#X msg 93 261 begin_pseudo_inverse;
#X msg 60 331 end_pseudo_inverse;
#X msg 110 217 1 -45 0 \, 2 -45 90 \, 3 -45 180 \, 4 -45 270 \, 6 -90
0;
#X msg 76 307 ipht_ireal_muladd \$1 \$2 \$3;
#N canvas 337 146 571 521 mirror_phantom_ls_____ 0;
#X msg 142 186 1 6 \$1;
#X obj 102 58 inlet;
#X obj 101 441 outlet;
#X obj 162 59 inlet;
#X obj 71 135 f;
#X obj 103 135 f;
#X obj 157 106 * 0.25;
#X obj 214 106 * 0.5;
#X msg 163 211 2 8 \$1;
#X msg 40 187 1 13 \$1 \, 1 7 \$1;
#X msg 61 212 2 7 \$1 \, 2 9 \$1;
#X msg 179 241 3 10 \$1;
#X msg 77 242 3 9 \$1 \, 3 11 \$1;
#X msg 199 271 4 12 \$1;
#X msg 87 271 4 11 \$1 \, 4 13 \$1;
#X obj 162 81 route mirror_weight;
#X obj 380 60 inlet;
#X connect 0 0 2 0;
#X connect 1 0 4 0;
#X connect 1 0 5 0;
#X connect 3 0 15 0;
#X connect 4 0 9 0;
#X connect 4 0 10 0;
#X connect 4 0 12 0;
#X connect 4 0 14 0;
#X connect 5 0 0 0;
#X connect 5 0 8 0;
#X connect 5 0 11 0;
#X connect 5 0 13 0;
#X connect 6 0 4 1;
#X connect 7 0 5 1;
#X connect 8 0 2 0;
#X connect 9 0 2 0;
#X connect 10 0 2 0;
#X connect 11 0 2 0;
#X connect 12 0 2 0;
#X connect 13 0 2 0;
#X connect 14 0 2 0;
#X connect 15 0 7 0;
#X connect 15 0 6 0;
#X restore 76 286 pd mirror_phantom_ls_____;
#X msg 298 248 sing_range 1e-10;
#X obj 130 364 ambi2_decode 3 3 13 5;
#X obj 130 407 mtx_print;
#X text 33 441 1.arg: <float> ambisonic order;
#X text 33 453 2.arg: <float> dimension (2 or 3);
#X text 33 465 3.arg: <float> number of real existing loudspeakers
;
#X text 33 477 4.arg: <float> number of virtual phantom_loudspeakers
;
#X text 65 428 initial arguments:;
#X connect 1 0 9 0;
#X connect 2 0 14 0;
#X connect 3 0 13 0;
#X connect 4 0 5 0;
#X connect 5 0 13 0;
#X connect 6 0 13 0;
#X connect 7 0 13 0;
#X connect 8 0 13 0;
#X connect 13 0 1 0;
#X connect 14 0 7 0;
#X connect 14 1 6 0;
#X connect 14 2 4 0;
#X connect 14 3 3 0;
#X connect 15 0 13 0;
#X connect 16 0 31 0;
#X connect 17 0 21 0;
#X connect 18 0 30 0;
#X connect 19 0 28 1;
#X connect 20 0 30 0;
#X connect 21 0 25 0;
#X connect 21 1 28 0;
#X connect 21 2 24 0;
#X connect 21 3 26 0;
#X connect 21 4 22 0;
#X connect 21 5 18 0;
#X connect 21 6 19 0;
#X connect 22 0 23 0;
#X connect 23 0 30 0;
#X connect 24 0 30 0;
#X connect 25 0 30 0;
#X connect 26 0 20 0;
#X connect 27 0 30 0;
#X connect 28 0 27 0;
#X connect 29 0 30 0;
#X connect 30 0 16 0;
#X restore 873 1323 pd helps;
#N canvas 200 177 1249 625 (subpatch) 0;
#X obj 137 390 pp real_ls;
#X msg 114 419 begin_pseudo_inverse;
#X msg 93 444 end_pseudo_inverse;
#X obj 94 507 outlet;
#X obj 91 81 t b b b;
#X obj 91 28 inlet;
#X obj 135 104 s to_nbxm;
#X obj 135 128 r from_nbxm;
#X obj 135 149 route matrix;
#X obj 135 172 niagara 2;
#X obj 135 199 unpack f f;
#X obj 135 223 min;
#X obj 177 294 repack 2;
#X obj 176 274 any;
#X obj 155 340 f;
#X obj 183 340 + 1;
#X msg 147 314 0;
#X obj 135 245 t b b f;
#X obj 178 313 t b l;
#X obj 183 361 iem_append;
#X obj 91 54 route DECODE;
#X connect 0 0 3 0;
#X connect 1 0 3 0;
#X connect 2 0 3 0;
#X connect 4 0 2 0;
#X connect 4 1 1 0;
#X connect 4 2 6 0;
#X connect 5 0 20 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 9 1 13 1;
#X connect 10 0 11 0;
#X connect 10 1 11 1;
#X connect 11 0 17 0;
#X connect 12 0 18 0;
#X connect 13 0 12 0;
#X connect 14 0 15 0;
#X connect 15 0 14 1;
#X connect 15 0 19 0;
#X connect 16 0 14 1;
#X connect 17 0 13 0;
#X connect 17 1 16 0;
#X connect 17 2 12 1;
#X connect 18 0 14 0;
#X connect 18 1 19 1;
#X connect 19 0 0 0;
#X connect 20 0 4 0;
#X restore 70 394 pd;
#X obj 70 475 round_zero 1e-06;
#X obj 621 64 nbxm 24 2 6 12 -360 360 0 from_nbxm to_nbxm #000000 0
10;
#N canvas 0 22 679 618 configure_nbxm 0;
#X obj 204 355 outlet;
#X msg 294 174 send empty;
#X msg 452 62 color #009900;
#X msg 276 203 receive empty;
#X msg 172 68 range -1e+06 1e+06;
#X msg 121 41 dim 3 3;
#X msg 195 116 font 0 8;
#X msg 208 166 size 4 12;
#X connect 1 0 0 0;
#X connect 2 0 0 0;
#X connect 3 0 0 0;
#X connect 4 0 0 0;
#X connect 5 0 0 0;
#X connect 6 0 0 0;
#X connect 7 0 0 0;
#X restore 949 1323 pd configure_nbxm;
#X obj 591 64 nbxm 24 1 3 12 0 1e+06 0 empty to_index #009900 0 10
;
#X obj 620 43 cnv 4 1 1 empty label_elv1 elevation 4 2 1 10 -262144
-1 0;
#X obj 581 43 cnv 4 1 1 empty empty index 4 2 1 10 -262144 -1 0;
#X obj 680 43 cnv 4 1 1 empty label_azm1 azimuth 4 2 1 10 -262144 -1
0;
#X obj 627 53 cnv 4 1 1 empty label_elv2 degree 4 2 1 10 -262144 -1
0;
#X obj 591 53 cnv 4 1 1 empty empty --- 4 2 1 10 -262144 -1 0;
#X obj 682 53 cnv 4 1 1 empty label_azm2 degree 4 2 1 10 -262144 -1
0;
#X msg 54 16 circ 5 12 circ12ls.mtx;
#X msg 54 61 hemi 4 24 hemi24ls.mtx;
#X msg 54 107 sphere 4 32 sphere32ls.mtx;
#X msg 54 38 circ 7 18;
#X msg 54 84 hemi 5 29;
#X msg 54 130 sphere 4 25;
#N canvas 470 208 617 586 (subpatch) 0;
#X obj 218 126 cnv 13 23 13 empty empty empty 20 12 0 14 -260929 -66577
0;
#X obj 218 183 cnv 13 23 13 empty empty empty 20 12 0 14 -260929 -66577
0;
#X obj 106 129 vradio 15 1 0 3 empty empty empty 0 -8 0 10 -260929
-1 -1 2;
#X text 124 128 circle;
#X text 124 143 hemisphere;
#X text 124 158 sphere;
#X symbolatom 107 181 0 0 0 0 - - -;
#X obj 99 219 sel 0 1 2;
#X obj 159 327 symbol;
#X msg 114 275 hemi;
#X msg 138 255 sphere;
#X floatatom 218 126 3 0 999 0 - - -;
#X text 194 102 AMBISONIC-;
#X text 204 112 -ORDER:;
#X text 107 100 LOUDSPEAKER-;
#X text 115 110 -LAYOUT:;
#X floatatom 218 183 3 0 999 0 - - -;
#X text 194 159 NUMBER OF;
#X text 184 169 LOUDSPEAKERS:;
#X obj 293 162 bng 35 250 50 0 empty empty empty 17 7 0 10 -243201
-1 -1;
#X obj 293 105 bng 15 250 50 0 empty empty empty 17 7 0 10 -261633
-1 -1;
#X text 332 176 MATRIX:;
#X text 331 166 DISPLAY;
#X symbolatom 293 127 0 0 0 0 - - -;
#X text 314 101 OPEN LOUDSPEAKER-;
#X text 320 111 -POSITION FILE;
#X obj 122 353 symbol;
#X obj 122 382 pack s f f s;
#X obj 123 524 outlet;
#X obj 261 396 openpanel;
#X obj 261 425 splitfilename /;
#X msg 97 295 circ;
#X obj 293 145 bng 10 250 50 0 empty empty empty 17 7 0 10 -258699
-1 -1;
#X msg 349 207 symbol;
#X text 305 141 NEW/CLEAR POS;
#X obj 222 495 pp set;
#X obj 223 520 outlet;
#X obj 124 501 list trim;
#X obj 491 198 sel default;
#X obj 562 154 loadbang;
#X msg 562 176 symbol;
#X msg 505 78 \$4 \$1 \$2 \$3;
#X obj 503 121 unpack s s f f;
#X obj 516 240 pack s s f f;
#X obj 423 248 pack s f f;
#X obj 423 226 symbol;
#X msg 517 264 \$2 \$3 \$4 \$1;
#X connect 2 0 7 0;
#X connect 7 0 31 0;
#X connect 7 1 9 0;
#X connect 7 2 10 0;
#X connect 8 0 6 0;
#X connect 8 0 26 1;
#X connect 9 0 8 0;
#X connect 10 0 8 0;
#X connect 11 0 27 1;
#X connect 16 0 27 2;
#X connect 19 0 26 0;
#X connect 20 0 29 0;
#X connect 23 0 27 3;
#X connect 26 0 27 0;
#X connect 27 0 41 0;
#X connect 29 0 30 0;
#X connect 30 1 23 0;
#X connect 31 0 8 0;
#X connect 32 0 33 0;
#X connect 33 0 23 0;
#X connect 35 0 36 0;
#X connect 37 0 28 0;
#X connect 38 0 45 0;
#X connect 38 1 43 0;
#X connect 39 0 40 0;
#X connect 40 0 38 1;
#X connect 41 0 42 0;
#X connect 42 0 38 0;
#X connect 42 1 43 1;
#X connect 42 1 45 1;
#X connect 42 2 43 2;
#X connect 42 2 44 1;
#X connect 42 3 43 3;
#X connect 42 3 44 2;
#X connect 43 0 46 0;
#X connect 44 0 35 0;
#X connect 44 0 37 0;
#X connect 45 0 44 0;
#X connect 46 0 35 0;
#X connect 46 0 37 0;
#X coords 0 -1 1 1 350 100 2 100 100;
#X restore 54 169 pd;
#X msg 106 301 sphere 4 17;
#X obj 216 501 mtx;
#X obj 216 457 savepanel;
#X obj 216 413 bng 40 250 50 0 empty empty empty 17 7 0 10 -259265
-1 -1;
#X msg 216 477 write \$1;
#X obj 71 372 cnv 15 45 15 empty empty empty 20 12 0 14 -260929 -66577
0;
#X obj 70 502 t a a a;
#X obj 70 528 nbxm 24 15 4 12 -360 360 0 empty empty #000000 0 8;
#X msg 130 503 dim \$1 \$2;
#X text 588 23 LOUDSPEAKER-POSITIONS;
#X msg 70 372 DECODE;
#X text 774 63 Instruction Manual \; 1.) choose LOUDSPEAKER-LAYOUT
\; 2.) choose AMBISONIC-ORDER \; 3.) choose NUMBER OF LOUDSPEAKERS
\; 4.) choose LOUDSPEAKER-POSITION-FILE or CLEAR it \; 5.) display
LOUDSPEAKER POSITIONS \; 6.) edit POSITIONS \; 7.) calculate Ambisonic
DECODEr-matrix \; 8.) SAVE DECODEr-matrix file;
#X connect 2 0 6 0;
#X connect 5 0 1 0;
#X connect 6 0 29 0;
#X connect 16 0 3 0;
#X connect 17 0 3 0;
#X connect 18 0 3 0;
#X connect 19 0 3 0;
#X connect 20 0 3 0;
#X connect 21 0 3 0;
#X connect 22 0 3 0;
#X connect 22 1 23 0;
#X connect 25 0 27 0;
#X connect 26 0 25 0;
#X connect 27 0 24 0;
#X connect 29 0 30 0;
#X connect 29 1 31 0;
#X connect 29 2 24 0;
#X connect 31 0 30 0;
#X connect 33 0 5 0;
