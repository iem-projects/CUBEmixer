#N canvas 1280 61 1148 651 10;
#N canvas 39 22 1198 565 (subpatch) 0;
#X obj 48 43 inlet;
#X text 209 33 list \; 1.arg: <symbol> kind of loudspeaker arrangement
\; [circle \, hemisphere \, sphere] \; 2.arg: <float> ambisonic order
\; 3.arg: <float> number of loudspeakers \;;
#X obj 48 122 route list;
#X obj 49 186 route circle Circle CIRCLE circ Circ CIRC c C;
#X obj 359 207 route hemisphere Hemisphere HEMISPHERE hemi Hemi HEMI
h H;
#X obj 752 229 route sphere Sphere SPHERE s S;
#X obj 957 276 print UNI_DECODE_error;
#X obj 957 252 pp couldn't parse:;
#X obj 194 243 ambi2_decode 3 2 7 0;
#X obj 49 286 pack f f;
#X obj 359 293 pack f f;
#X obj 754 321 pack f f;
#X obj 194 266 ambi2_decode 4 2 9 0;
#X obj 541 278 ambi2_decode_hemi 4 15 0;
#X obj 931 306 ambi2_decode 4 3 25 0;
#X obj 48 309 t b l l b;
#X obj 360 318 t b l l b;
#X obj 754 347 t b l l b;
#X obj 70 453 symbol;
#X obj 50 241 unpack f f s;
#X obj 360 264 unpack f f s;
#X obj 753 287 unpack f f s;
#X obj 50 215 t l b;
#X obj 359 241 t l b;
#X obj 752 259 t l b;
#X obj 87 432 makefilename empty_%c;
#X msg 86 411 2;
#N canvas 0 22 587 369 labels 0;
#X obj 40 17 inlet;
#X obj 335 20 inlet;
#X text 87 16 1 col;
#X text 277 21 2 col;
#X msg 288 187 label azimuth;
#X msg 287 211 label degree;
#X msg 275 166 label empty;
#X msg 98 171 label elevation;
#X msg 109 192 label azimuth;
#X obj 282 257 s \$0_label_azm2;
#X obj 275 234 s \$0_label_azm1;
#X obj 81 236 s \$0_label_elv1;
#X connect 0 0 8 0;
#X connect 0 0 6 0;
#X connect 1 0 7 0;
#X connect 1 0 4 0;
#X connect 1 0 5 0;
#X connect 4 0 10 0;
#X connect 5 0 9 0;
#X connect 6 0 9 0;
#X connect 6 0 10 0;
#X connect 7 0 11 0;
#X connect 8 0 11 0;
#X restore 266 441 pd labels;
#N canvas 202 122 985 653 read_position_matrix 0;
#X msg 309 258 bang;
#X msg 349 257 read \$1;
#X obj 309 282 mtx;
#X obj 310 227 t b s;
#X msg 434 264 write test.mtx;
#X obj 159 159 sel default;
#X obj 246 128 makefilename empty_%c;
#X msg 246 106 2;
#X obj 246 85 loadbang;
#X obj 124 247 mtx 1 1;
#X msg 124 221 zeros \$1 \$2;
#X obj 63 139 route dim;
#X obj 123 198 any;
#X obj 239 203 sel default;
#X obj 310 159 loadbang;
#X msg 310 181 symbol;
#X obj 396 189 route dim;
#X obj 309 306 mtx_resize;
#X obj 63 119 r \$0_to_nbxm;
#X obj 164 324 s \$0_to_nbxm;
#X obj 396 167 r \$0_to_nbxm;
#X obj 159 45 inlet;
#X connect 0 0 2 0;
#X connect 1 0 2 0;
#X connect 2 0 17 0;
#X connect 3 0 0 0;
#X connect 3 1 1 0;
#X connect 4 0 2 0;
#X connect 5 0 12 0;
#X connect 5 1 13 0;
#X connect 6 0 5 1;
#X connect 7 0 6 0;
#X connect 8 0 7 0;
#X connect 9 0 19 0;
#X connect 10 0 9 0;
#X connect 11 0 12 1;
#X connect 12 0 10 0;
#X connect 13 0 12 0;
#X connect 13 1 3 0;
#X connect 14 0 15 0;
#X connect 15 0 13 1;
#X connect 16 0 17 1;
#X connect 17 0 19 0;
#X connect 18 0 11 0;
#X connect 20 0 16 0;
#X connect 21 0 5 0;
#X restore 70 476 pd read_position_matrix;
#N canvas 0 22 423 471 index_col 0;
#X obj 40 99 unpack f f;
#X msg 151 99 set;
#X obj 105 121 t f f;
#X msg 135 144 set matrix \$1 1;
#X obj 104 172 until;
#X obj 200 259 f;
#X obj 228 259 + 1;
#X msg 189 99 0;
#X msg 229 281 add2 \$1;
#X obj 40 17 inlet;
#X obj 39 42 t b l b;
#X msg 133 324 matrix 3 1 1 2 3;
#X obj 132 351 s \$0_to_index;
#X connect 0 1 2 0;
#X connect 1 0 11 0;
#X connect 2 0 4 0;
#X connect 2 1 3 0;
#X connect 3 0 11 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 5 1;
#X connect 6 0 8 0;
#X connect 7 0 5 1;
#X connect 8 0 11 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 10 1 0 0;
#X connect 10 2 1 0;
#X connect 10 2 7 0;
#X connect 11 0 12 0;
#X restore 378 469 pd index_col;
#N canvas 0 22 733 594 dyn_patched_decoder_sphere 0;
#X obj 63 423 s \$0_to_index;
#X obj 85 382 s \$0_to_nbxm;
#X msg 63 403 dim \$2 1;
#X msg 84 359 dim \$2 2;
#X obj 138 291 makefilename pd-%d_dec;
#X obj 139 267 f \$0;
#X obj 109 335 iem_s;
#X msg 138 313 set \$1;
#X obj 139 243 loadbang;
#X msg 108 197 clear \, obj 50 50 r \$3_dec_in \, obj 50 100 ambi2_decode
\$1 3 \$2 0 \, obj 50 150 s \$3_dec_out \, connect 0 0 1 0 \, connect
1 0 2 0;
#X obj 63 150 t l l l;
#X obj 107 174 iem_append \$0;
#X msg 209 78 \; pd-dec clear \; pd-dec obj 50 50 r dec_in \; pd-dec
obj 50 100 ambi2_decode \$1 3 \$2 0 \; pd-dec obj 50 150 s dec_out
\; pd-dec connect 0 0 1 0 \; pd-dec connect 1 0 2 0 \; to_nbxm dim
\$2 2 \; to_index dim \$2 1;
#X obj 64 33 inlet;
#X text 112 31 list of 2 floats;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 4 0 7 0;
#X connect 5 0 4 0;
#X connect 7 0 6 1;
#X connect 8 0 5 0;
#X connect 9 0 6 0;
#X connect 10 0 2 0;
#X connect 10 1 3 0;
#X connect 10 2 11 0;
#X connect 11 0 9 0;
#X connect 13 0 10 0;
#X restore 791 384 pd dyn_patched_decoder_sphere;
#N canvas 425 117 733 594 dyn_patched_decoder_hemi 0;
#X obj 63 423 s \$0_to_index;
#X obj 85 382 s \$0_to_nbxm;
#X msg 63 403 dim \$2 1;
#X msg 84 359 dim \$2 2;
#X obj 138 291 makefilename pd-%d_dec;
#X obj 139 267 f \$0;
#X obj 109 335 iem_s;
#X msg 138 313 set \$1;
#X obj 139 243 loadbang;
#X obj 63 150 t l l l;
#X obj 107 174 iem_append \$0;
#X obj 64 33 inlet;
#X text 112 31 list of 2 floats;
#X msg 207 78 \; pd-dec clear \; pd-dec obj 50 50 r dec_in \; pd-dec
obj 50 100 ambi2_decode_hemi \$1 \$2 0 \; pd-dec obj 50 150 s dec_out
\; pd-dec connect 0 0 1 0 \; pd-dec connect 1 0 2 0 \; to_nbxm dim
\$2 2 \; to_index dim \$2 1;
#X msg 108 197 clear \, obj 50 50 r \$3_dec_in \, obj 50 100 ambi2_decode_hemi
\$1 \$2 0 \, obj 50 150 s \$3_dec_out \, connect 0 0 1 0 \, connect
1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 4 0 7 0;
#X connect 5 0 4 0;
#X connect 7 0 6 1;
#X connect 8 0 5 0;
#X connect 9 0 2 0;
#X connect 9 1 3 0;
#X connect 9 2 10 0;
#X connect 10 0 14 0;
#X connect 11 0 9 0;
#X connect 14 0 6 0;
#X restore 397 343 pd dyn_patched_decoder_hemi;
#N canvas 425 117 737 598 dyn_patched_decoder_circle 0;
#X obj 63 423 s \$0_to_index;
#X obj 85 382 s \$0_to_nbxm;
#X msg 63 403 dim \$2 1;
#X obj 138 291 makefilename pd-%d_dec;
#X obj 139 267 f \$0;
#X obj 109 335 iem_s;
#X msg 138 313 set \$1;
#X obj 139 243 loadbang;
#X obj 63 150 t l l l;
#X obj 107 174 iem_append \$0;
#X obj 64 33 inlet;
#X text 112 31 list of 2 floats;
#X msg 214 62 \; pd-dec clear \; pd-dec obj 50 50 r dec_in \; pd-dec
obj 50 100 ambi2_decode \$1 2 \$2 0 \; pd-dec obj 50 150 s dec_out
\; pd-dec connect 0 0 1 0 \; pd-dec connect 1 0 2 0 \; to_nbxm dim
\$2 1 \; to_index dim \$2 1;
#X msg 108 197 clear \, obj 50 50 r \$3_dec_in \, obj 50 100 ambi2_decode
\$1 2 \$2 0 \, obj 50 150 s \$3_dec_out \, connect 0 0 1 0 \, connect
1 0 2 0;
#X msg 84 359 dim \$2 1;
#X connect 2 0 0 0;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 6 0 5 1;
#X connect 7 0 4 0;
#X connect 8 0 2 0;
#X connect 8 1 14 0;
#X connect 8 2 9 0;
#X connect 9 0 13 0;
#X connect 10 0 8 0;
#X connect 13 0 5 0;
#X connect 14 0 1 0;
#X restore 87 332 pd dyn_patched_decoder_circle;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 3 0;
#X connect 3 0 22 0;
#X connect 3 1 22 0;
#X connect 3 2 22 0;
#X connect 3 3 22 0;
#X connect 3 4 22 0;
#X connect 3 5 22 0;
#X connect 3 6 22 0;
#X connect 3 7 22 0;
#X connect 3 8 4 0;
#X connect 4 0 23 0;
#X connect 4 1 23 0;
#X connect 4 2 23 0;
#X connect 4 3 23 0;
#X connect 4 4 23 0;
#X connect 4 5 23 0;
#X connect 4 6 23 0;
#X connect 4 7 23 0;
#X connect 4 8 5 0;
#X connect 5 0 24 0;
#X connect 5 1 24 0;
#X connect 5 2 24 0;
#X connect 5 3 24 0;
#X connect 5 4 24 0;
#X connect 5 5 7 0;
#X connect 7 0 6 0;
#X connect 9 0 15 0;
#X connect 10 0 16 0;
#X connect 11 0 17 0;
#X connect 15 0 18 0;
#X connect 15 1 29 0;
#X connect 15 2 32 0;
#X connect 15 3 27 0;
#X connect 16 0 18 0;
#X connect 16 1 29 0;
#X connect 16 2 31 0;
#X connect 16 3 27 1;
#X connect 17 0 18 0;
#X connect 17 1 29 0;
#X connect 17 2 30 0;
#X connect 17 3 27 1;
#X connect 18 0 28 0;
#X connect 19 0 9 0;
#X connect 19 1 9 1;
#X connect 19 2 18 1;
#X connect 20 0 10 0;
#X connect 20 1 10 1;
#X connect 20 2 18 1;
#X connect 21 0 11 0;
#X connect 21 1 11 1;
#X connect 21 2 18 1;
#X connect 22 0 19 0;
#X connect 22 1 26 0;
#X connect 23 0 20 0;
#X connect 23 1 26 0;
#X connect 24 0 21 0;
#X connect 24 1 26 0;
#X connect 25 0 18 1;
#X connect 26 0 25 0;
#X restore 54 348 pd;
#N canvas 0 22 1235 630 helps 0;
#X text 548 417 1.arg: <float> ambisonic order;
#X obj 621 354 round_zero 1e-06;
#X obj 551 14 bng 35 250 50 0 empty empty empty 0 -6 0 8 -24198 -42246
-1;
#X msg 609 135 ambi_weight 1 1 1 1;
#X msg 589 164 1 90 0 \, 2 45 45 \, 3 45 135 \, 4 45 225 \, 5 45 315
\, 6 0 0 \, 7 0 45 \, 8 0 90 \, 9 0 135 \, 10 0 180 \, 11 0 225 \,
12 0 270 \, 13 0 315;
#X obj 589 198 pp real_ls;
#X msg 571 227 begin_pseudo_inverse;
#X msg 551 299 end_pseudo_inverse;
#X msg 755 276 sing_range 1e-10;
#X obj 621 377 mtx_print;
#X text 580 404 initial arguments:;
#X text 548 430 2.arg: <float> number of real existing loudspeakers
;
#X text 548 442 3.arg: <float> number of virtual phantom_loudspeakers
;
#X obj 621 333 ambi2_decode_hemi 3 13 0;
#X obj 551 58 t b b b b;
#X msg 566 264 ipht_ireal_muladd \$1 \$2 \$3;
#X obj 130 386 round_zero 1e-06;
#X obj 60 51 bng 35 250 50 0 empty empty empty 0 -6 0 8 -24198 -42246
-1;
#X msg 143 139 ambi_weight 1 1 1 1;
#X msg 160 117 mirror_weight 0.7;
#X obj 110 238 pp pht_ls;
#X obj 60 95 t b b b b b b b;
#X msg 126 161 1 90 0 \, 2 45 45 \, 3 45 135 \, 4 45 225 \, 5 45 315
\, 6 0 0 \, 7 0 45 \, 8 0 90 \, 9 0 135 \, 10 0 180 \, 11 0 225 \,
12 0 270 \, 13 0 315;
#X obj 126 195 pp real_ls;
#X msg 93 261 begin_pseudo_inverse;
#X msg 60 331 end_pseudo_inverse;
#X msg 110 217 1 -45 0 \, 2 -45 90 \, 3 -45 180 \, 4 -45 270 \, 6 -90
0;
#X msg 76 307 ipht_ireal_muladd \$1 \$2 \$3;
#N canvas 337 146 571 521 mirror_phantom_ls_____ 0;
#X msg 142 186 1 6 \$1;
#X obj 102 58 inlet;
#X obj 101 441 outlet;
#X obj 162 59 inlet;
#X obj 71 135 f;
#X obj 103 135 f;
#X obj 157 106 * 0.25;
#X obj 214 106 * 0.5;
#X msg 163 211 2 8 \$1;
#X msg 40 187 1 13 \$1 \, 1 7 \$1;
#X msg 61 212 2 7 \$1 \, 2 9 \$1;
#X msg 179 241 3 10 \$1;
#X msg 77 242 3 9 \$1 \, 3 11 \$1;
#X msg 199 271 4 12 \$1;
#X msg 87 271 4 11 \$1 \, 4 13 \$1;
#X obj 162 81 route mirror_weight;
#X obj 380 60 inlet;
#X connect 0 0 2 0;
#X connect 1 0 4 0;
#X connect 1 0 5 0;
#X connect 3 0 15 0;
#X connect 4 0 9 0;
#X connect 4 0 10 0;
#X connect 4 0 12 0;
#X connect 4 0 14 0;
#X connect 5 0 0 0;
#X connect 5 0 8 0;
#X connect 5 0 11 0;
#X connect 5 0 13 0;
#X connect 6 0 4 1;
#X connect 7 0 5 1;
#X connect 8 0 2 0;
#X connect 9 0 2 0;
#X connect 10 0 2 0;
#X connect 11 0 2 0;
#X connect 12 0 2 0;
#X connect 13 0 2 0;
#X connect 14 0 2 0;
#X connect 15 0 7 0;
#X connect 15 0 6 0;
#X restore 76 286 pd mirror_phantom_ls_____;
#X msg 298 248 sing_range 1e-10;
#X obj 130 364 ambi2_decode 3 3 13 5;
#X obj 130 407 mtx_print;
#X text 33 441 1.arg: <float> ambisonic order;
#X text 33 453 2.arg: <float> dimension (2 or 3);
#X text 33 465 3.arg: <float> number of real existing loudspeakers
;
#X text 33 477 4.arg: <float> number of virtual phantom_loudspeakers
;
#X text 65 428 initial arguments:;
#X connect 1 0 9 0;
#X connect 2 0 14 0;
#X connect 3 0 13 0;
#X connect 4 0 5 0;
#X connect 5 0 13 0;
#X connect 6 0 13 0;
#X connect 7 0 13 0;
#X connect 8 0 13 0;
#X connect 13 0 1 0;
#X connect 14 0 7 0;
#X connect 14 1 6 0;
#X connect 14 2 4 0;
#X connect 14 3 3 0;
#X connect 15 0 13 0;
#X connect 16 0 31 0;
#X connect 17 0 21 0;
#X connect 18 0 30 0;
#X connect 19 0 28 1;
#X connect 20 0 30 0;
#X connect 21 0 25 0;
#X connect 21 1 28 0;
#X connect 21 2 24 0;
#X connect 21 3 26 0;
#X connect 21 4 22 0;
#X connect 21 5 18 0;
#X connect 21 6 19 0;
#X connect 22 0 23 0;
#X connect 23 0 30 0;
#X connect 24 0 30 0;
#X connect 25 0 30 0;
#X connect 26 0 20 0;
#X connect 27 0 30 0;
#X connect 28 0 27 0;
#X connect 29 0 30 0;
#X connect 30 0 16 0;
#X restore 873 1323 pd helps;
#X obj 621 64 nbxm 3 1 6 12 -360 360 0 1002_from_nbxm 1002_to_nbxm
#000000 0 10;
#N canvas 0 22 691 630 configure_nbxm 0;
#X obj 204 355 outlet;
#X msg 294 174 send empty;
#X msg 452 62 color #009900;
#X msg 276 203 receive empty;
#X msg 172 68 range -1e+06 1e+06;
#X msg 121 41 dim 3 3;
#X msg 195 116 font 0 8;
#X msg 208 166 size 4 12;
#X obj 374 324 pp receive;
#X obj 374 277 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 370 407 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 374 301 any \$0_to_nbxm;
#X obj 372 429 any \$0_from_nbxm;
#X obj 373 451 pp send;
#X connect 1 0 0 0;
#X connect 2 0 0 0;
#X connect 3 0 0 0;
#X connect 4 0 0 0;
#X connect 5 0 0 0;
#X connect 6 0 0 0;
#X connect 7 0 0 0;
#X connect 8 0 0 0;
#X connect 9 0 11 0;
#X connect 10 0 12 0;
#X connect 11 0 8 0;
#X connect 12 0 13 0;
#X connect 13 0 0 0;
#X restore 704 1322 pd configure_nbxm;
#X obj 591 64 nbxm 3 1 3 12 0 1e+06 0 empty 1002_to_index #009900 0
10;
#X obj 620 43 cnv 4 1 1 empty \$0_label_elv1 azimuth 4 2 1 10 -262144
-1 0;
#X obj 581 43 cnv 4 1 1 empty empty index 4 2 1 10 -262144 -1 0;
#X obj 680 43 cnv 4 1 1 empty \$0_label_azm1 empty 4 2 1 10 -262144
-1 0;
#X obj 627 53 cnv 4 1 1 empty \$0_label_elv2 degree 4 2 1 10 -262144
-1 0;
#X obj 591 53 cnv 4 1 1 empty empty --- 4 2 1 10 -262144 -1 0;
#X obj 682 53 cnv 4 1 1 empty \$0_label_azm2 empty 4 2 1 10 -262144
-1 0;
#X msg 54 59 circ 5 12 circ12ls.mtx;
#X msg 54 81 hemi 4 24 hemi24ls.mtx;
#X msg 54 103 sphere 4 32 sphere32ls.mtx;
#X msg 255 65 circ 7 18;
#X msg 255 84 hemi 5 29;
#X msg 254 105 sphere 4 25;
#N canvas 1419 130 603 779 (subpatch) 0;
#X obj 238 326 cnv 13 23 13 empty empty empty 20 12 0 14 -260929 -66577
0;
#X obj 238 383 cnv 13 23 13 empty empty empty 20 12 0 14 -260929 -66577
0;
#X obj 116 329 vradio 15 1 0 3 empty empty empty 0 -8 0 10 -260929
-1 -1 0;
#X text 134 328 circle;
#X text 134 343 hemisphere;
#X text 134 358 sphere;
#X symbolatom 117 381 0 0 0 0 - - -;
#X obj 99 419 sel 0 1 2;
#X obj 159 527 symbol;
#X msg 114 475 hemi;
#X msg 138 455 sphere;
#X floatatom 238 326 3 0 999 0 - - -;
#X text 214 302 AMBISONIC-;
#X text 224 312 -ORDER:;
#X text 117 300 LOUDSPEAKER-;
#X text 125 310 -LAYOUT:;
#X floatatom 238 383 3 0 999 0 - - -;
#X text 214 359 NUMBER OF;
#X text 204 369 LOUDSPEAKERS:;
#X obj 313 362 bng 35 250 50 0 empty empty empty 17 7 0 10 -243201
-1 -1;
#X obj 313 305 bng 15 250 50 0 empty empty empty 17 7 0 10 -261633
-1 -1;
#X text 352 376 MATRIX:;
#X text 351 366 DISPLAY;
#X symbolatom 313 327 0 0 0 0 - - -;
#X text 334 301 OPEN LOUDSPEAKER-;
#X text 340 311 -POSITION FILE;
#X obj 122 553 symbol;
#X obj 122 582 pack s f f s;
#X obj 262 674 outlet;
#X obj 288 410 openpanel;
#X obj 288 439 splitfilename /;
#X msg 97 495 circ;
#X obj 313 345 bng 10 250 50 0 empty empty empty 17 7 0 10 -258699
-1 -1;
#X msg 514 323 symbol;
#X text 325 341 NEW/CLEAR POS;
#X obj 342 651 pp set;
#X obj 343 676 outlet;
#X obj 263 651 list trim;
#X obj 271 571 sel default;
#X obj 343 527 loadbang;
#X msg 343 549 symbol;
#X msg 285 468 \$4 \$1 \$2 \$3;
#X obj 284 494 unpack s s f f;
#X obj 344 592 pack s s f f;
#X obj 270 617 pack s f f;
#X obj 270 595 symbol;
#X msg 345 616 \$2 \$3 \$4 \$1;
#X obj 103 14 inlet;
#X obj 124 86 list length;
#X obj 123 129 route 3 4;
#X obj 123 107 iem_append;
#X obj 149 155 unpack s f f s;
#X obj 55 154 unpack s f f;
#X obj 102 65 t b a a;
#X obj 103 39 route list;
#N canvas 292 58 659 544 sel_circ_hemi_sphere 0;
#X obj 97 245 outlet;
#X obj 151 247 outlet;
#X obj 103 14 inlet;
#X obj 205 249 outlet;
#X obj 298 248 outlet;
#X obj 104 42 sel circle Circle CIRCLE circ Circ CIRC c C;
#X obj 105 71 t b;
#X obj 140 112 t b;
#X obj 140 78 sel hemisphere Hemisphere HEMISPHERE hemi Hemi HEMI h
H;
#X obj 193 119 sel sphere Sphere SPHERE s S;
#X obj 192 149 t b;
#X connect 2 0 5 0;
#X connect 5 0 6 0;
#X connect 5 1 6 0;
#X connect 5 2 6 0;
#X connect 5 3 6 0;
#X connect 5 4 6 0;
#X connect 5 5 6 0;
#X connect 5 6 6 0;
#X connect 5 7 6 0;
#X connect 5 8 8 0;
#X connect 6 0 0 0;
#X connect 7 0 1 0;
#X connect 8 0 7 0;
#X connect 8 1 7 0;
#X connect 8 2 7 0;
#X connect 8 3 7 0;
#X connect 8 4 7 0;
#X connect 8 5 7 0;
#X connect 8 6 7 0;
#X connect 8 7 7 0;
#X connect 8 8 9 0;
#X connect 9 0 10 0;
#X connect 9 1 10 0;
#X connect 9 2 10 0;
#X connect 9 3 10 0;
#X connect 9 4 10 0;
#X connect 9 5 4 0;
#X connect 10 0 3 0;
#X restore 100 206 pd sel_circ_hemi_sphere;
#X obj 255 252 print UNI_DECODE_error;
#X obj 255 228 pp couldn't parse:;
#X msg 101 239 0;
#X msg 131 239 1;
#X msg 162 239 2;
#X obj 135 178 t f b;
#X obj 101 332 cnv 4 1 1 empty empty 1.) 0 2 1 10 -262144 -1 0;
#X obj 215 329 cnv 4 1 1 empty empty 2.) 0 2 1 10 -262144 -1 0;
#X obj 295 309 cnv 4 1 1 empty empty 4.) 0 2 1 10 -262144 -1 0;
#X obj 295 386 cnv 4 1 1 empty empty 5.) 0 2 1 10 -262144 -1 0;
#X obj 215 386 cnv 4 1 1 empty empty 3.) 0 2 1 10 -262144 -1 0;
#X obj 295 346 cnv 4 1 1 empty empty 4.) 0 2 1 10 -262144 -1 0;
#X obj 208 475 max 21;
#N canvas 1840 217 463 458 calclsmin 0;
#X obj 52 25 inlet;
#X obj 283 42 inlet;
#X obj 49 400 outlet;
#X obj 278 68 t b f;
#X text 334 42 ambi order;
#X text 99 25 0..circ \; 1..hemi \; 2..sphere;
#X obj 51 128 sel 0 1 2;
#X obj 52 104 f;
#X obj 48 227 expr $f1*2 + 1;
#X obj 110 358 expr ($f1+1)*($f1+1);
#X obj 79 296 expr ($f1+1)*($f1+2)/2;
#X obj 50 203 f;
#X obj 80 274 f;
#X obj 110 334 f;
#X text 104 402 minimum of speaker needed;
#X connect 0 0 7 0;
#X connect 1 0 3 0;
#X connect 3 0 7 0;
#X connect 3 1 11 1;
#X connect 3 1 12 1;
#X connect 3 1 13 1;
#X connect 6 0 11 0;
#X connect 6 1 12 0;
#X connect 6 2 13 0;
#X connect 7 0 6 0;
#X connect 8 0 2 0;
#X connect 9 0 2 0;
#X connect 10 0 2 0;
#X connect 11 0 8 0;
#X connect 12 0 10 0;
#X connect 13 0 9 0;
#X restore 178 412 pd calclsmin;
#X msg 216 498 set \$1;
#X floatatom 20 538 5 0 0 0 - - -;
#X floatatom 39 569 5 0 0 0 - - -;
#X obj 206 445 t b f;
#X connect 2 0 7 0;
#X connect 2 0 69 0;
#X connect 7 0 31 0;
#X connect 7 1 9 0;
#X connect 7 2 10 0;
#X connect 8 0 6 0;
#X connect 8 0 26 1;
#X connect 9 0 8 0;
#X connect 10 0 8 0;
#X connect 11 0 27 1;
#X connect 11 0 69 1;
#X connect 16 0 68 0;
#X connect 19 0 26 0;
#X connect 20 0 29 0;
#X connect 23 0 27 3;
#X connect 26 0 27 0;
#X connect 27 0 41 0;
#X connect 29 0 30 0;
#X connect 30 1 23 0;
#X connect 31 0 8 0;
#X connect 32 0 33 0;
#X connect 33 0 23 0;
#X connect 35 0 36 0;
#X connect 37 0 28 0;
#X connect 38 0 45 0;
#X connect 38 1 43 0;
#X connect 39 0 40 0;
#X connect 40 0 38 1;
#X connect 41 0 42 0;
#X connect 42 0 38 0;
#X connect 42 1 43 1;
#X connect 42 1 45 1;
#X connect 42 2 43 2;
#X connect 42 2 44 1;
#X connect 42 3 43 3;
#X connect 42 3 44 2;
#X connect 43 0 46 0;
#X connect 44 0 35 0;
#X connect 44 0 37 0;
#X connect 45 0 44 0;
#X connect 46 0 35 0;
#X connect 46 0 37 0;
#X connect 47 0 54 0;
#X connect 48 0 50 0;
#X connect 49 0 52 0;
#X connect 49 1 51 0;
#X connect 50 0 49 0;
#X connect 51 0 55 0;
#X connect 51 1 11 0;
#X connect 51 2 16 0;
#X connect 51 3 23 0;
#X connect 52 0 55 0;
#X connect 52 1 11 0;
#X connect 52 2 61 0;
#X connect 53 0 19 0;
#X connect 53 1 48 0;
#X connect 53 2 50 1;
#X connect 54 0 53 0;
#X connect 54 1 53 0;
#X connect 55 0 58 0;
#X connect 55 1 59 0;
#X connect 55 2 60 0;
#X connect 55 3 57 0;
#X connect 57 0 56 0;
#X connect 58 0 2 0;
#X connect 59 0 2 0;
#X connect 60 0 2 0;
#X connect 61 0 16 0;
#X connect 61 1 32 0;
#X connect 68 0 27 2;
#X connect 68 0 70 0;
#X connect 68 0 72 0;
#X connect 69 0 71 0;
#X connect 69 0 73 0;
#X connect 70 0 16 0;
#X connect 73 0 68 0;
#X connect 73 1 68 1;
#X coords 0 -1 1 1 400 100 2 100 300;
#X restore 54 216 pd;
#X msg 106 349 circ 3 3 hemi24ls.mtx;
#X obj 170 397 bng 40 250 50 0 empty empty empty 17 7 0 10 -259265
-1 -1;
#X obj 70 410 cnv 15 45 15 empty empty empty 20 12 0 14 -260929 -66577
0;
#X obj 70 468 nbxm 3 3 4 12 -360 360 0 empty empty #000000 0 8;
#X text 588 23 LOUDSPEAKER-POSITIONS;
#X msg 69 410 DECODE;
#X text 794 18 Instruction Manual \; 1.) choose LOUDSPEAKER-LAYOUT
\; 2.) choose AMBISONIC-ORDER \; 3.) choose NUMBER OF LOUDSPEAKERS
\; 4.) choose LOUDSPEAKER-POSITION-FILE or CLEAR it \; 5.) display
LOUDSPEAKER POSITIONS \; 6.) edit POSITIONS \; 7.) calculate Ambisonic
DECODEr-matrix \; 8.) SAVE DECODEr-matrix file;
#X text 863 165 IEM KUG;
#X text 838 153 musil;
#X text 874 153 @;
#X text 883 153 iem.at;
#X text 846 175 Graz \, Austria;
#X text 795 142 (c) Thomas Musil 2000 - 2008;
#X obj 571 70 cnv 4 1 1 empty empty 6.) 0 2 1 10 -262144 -1 0;
#X obj 50 413 cnv 4 1 1 empty empty 7.) 0 2 1 10 -262144 -1 0;
#X obj 149 412 cnv 4 1 1 empty empty 8.) 0 2 1 10 -262144 -1 0;
#N canvas 41 80 429 682 calc_decoder 0;
#X obj 137 390 pp real_ls;
#X msg 114 419 begin_pseudo_inverse;
#X msg 93 444 end_pseudo_inverse;
#X obj 91 81 t b b b;
#X obj 91 28 inlet;
#X obj 135 149 route matrix;
#X obj 135 172 niagara 2;
#X obj 135 199 unpack f f;
#X obj 135 223 min;
#X obj 177 294 repack 2;
#X obj 176 274 any;
#X obj 155 340 f;
#X obj 183 340 + 1;
#X msg 147 314 0;
#X obj 135 245 t b b f;
#X obj 178 313 t b l;
#X obj 183 361 iem_append;
#X obj 91 54 route DECODE;
#X obj 135 104 s \$0_to_nbxm;
#X obj 135 128 r \$0_from_nbxm;
#X obj 95 530 round_zero 1e-06;
#X obj 291 602 mtx;
#X obj 291 558 savepanel;
#X msg 291 578 write \$1;
#X obj 95 557 t a a a;
#X msg 155 558 dim \$1 \$2;
#N canvas 0 22 522 372 \$0_dec 0;
#X obj 50 50 r 1002_dec_in;
#X obj 50 100 ambi2_decode 3 2 3 0;
#X obj 50 150 s 1002_dec_out;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X restore 95 490 pd \$0_dec;
#X obj 95 471 s \$0_dec_in;
#X obj 95 510 r \$0_dec_out;
#X obj 300 21 inlet;
#X obj 96 605 outlet;
#X connect 0 0 27 0;
#X connect 1 0 27 0;
#X connect 2 0 27 0;
#X connect 3 0 2 0;
#X connect 3 1 1 0;
#X connect 3 2 18 0;
#X connect 4 0 17 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 6 1 10 1;
#X connect 7 0 8 0;
#X connect 7 1 8 1;
#X connect 8 0 14 0;
#X connect 9 0 15 0;
#X connect 10 0 9 0;
#X connect 11 0 12 0;
#X connect 12 0 11 1;
#X connect 12 0 16 0;
#X connect 13 0 11 1;
#X connect 14 0 10 0;
#X connect 14 1 13 0;
#X connect 14 2 9 1;
#X connect 15 0 11 0;
#X connect 15 1 16 1;
#X connect 16 0 0 0;
#X connect 17 0 3 0;
#X connect 19 0 5 0;
#X connect 20 0 24 0;
#X connect 22 0 23 0;
#X connect 23 0 21 0;
#X connect 24 0 30 0;
#X connect 24 1 25 0;
#X connect 24 2 21 0;
#X connect 25 0 30 0;
#X connect 28 0 20 0;
#X connect 29 0 22 0;
#X restore 70 444 pd calc_decoder;
#X text 260 45 Presets plain to be filled;
#X text 50 40 Presets w. layout Files;
#X text 51 18 EXAMPLES;
#X text 105 326 for storing presets;
#X text 110 193 PLEASE WATCH THE CONSOLE FOR WARNINGS ON DISPLAY !!!
;
#X text 220 405 SAVE the DECODER-matrix;
#X text 224 425 USE Extension for file name "*.mtx";
#X connect 11 0 17 0;
#X connect 12 0 17 0;
#X connect 13 0 17 0;
#X connect 14 0 17 0;
#X connect 15 0 17 0;
#X connect 16 0 17 0;
#X connect 17 0 0 0;
#X connect 17 1 18 0;
#X connect 19 0 34 1;
#X connect 23 0 34 0;
#X connect 34 0 21 0;
